/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./src/main.js");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./src/avo/action-mode/action-mode.js":
/*!********************************************!*\
  !*** ./src/avo/action-mode/action-mode.js ***!
  \********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _avo_misc_constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @avo/misc/constants */ \"./src/avo/misc/constants.js\");\n/* harmony import */ var _avo_misc_physics__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @avo/misc/physics */ \"./src/avo/misc/physics.js\");\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n\n\n\nvar ActionMode =\n/*#__PURE__*/\nfunction () {\n  function ActionMode(app) {\n    _classCallCheck(this, ActionMode);\n\n    this._app = app;\n    this.html = document.getElementById('action-mode');\n    this.width = 320;\n    this.height = 240;\n    this.canvas2d = this.html.getContext(\"2d\"); // Set HTML\n\n    this.html.width = this.width;\n    this.html.height = this.height;\n    this.canvasSizeRatio = 1;\n    this.html.onkeydown = this.onKeyDown.bind(this);\n    this.html.onkeyup = this.onKeyUp.bind(this); // Keys that are currently being pressed, and the number of frames they've\n    // been pressed for.\n\n    this.keysPressed = {};\n  }\n\n  _createClass(ActionMode, [{\n    key: \"load\",\n    value: function load() {\n      this.focus();\n    }\n  }, {\n    key: \"unload\",\n    value: function unload() {}\n  }, {\n    key: \"focus\",\n    value: function focus() {\n      this.html.focus();\n    }\n  }, {\n    key: \"play\",\n    value: function play() {\n      var _this = this;\n\n      var app = this._app;\n      this.processPlayerInput(); // Run logic for each Story Element\n\n      app.actors.forEach(function (actor) {\n        actor.play();\n      });\n      app.particles.forEach(function (particle) {\n        particle.play();\n      });\n      this.processPhysics(); // Increment the duration of each currently pressed key\n\n      Object.keys(this.keysPressed).forEach(function (key) {\n        if (_this.keysPressed[key]) _this.keysPressed[key]++;\n      }); // DEBUG\n\n      if (app.playerActor) {//console.log('+++ A: ', app.playerActor.actionName);\n      }\n    }\n  }, {\n    key: \"paint\",\n    value: function paint() {\n      var app = this._app;\n      var canvas2d = this.canvas2d; // Clear canvas before painting\n\n      canvas2d.clearRect(0, 0, this.width, this.height); // Paint each Story Element\n\n      app.particles.forEach(function (particle) {\n        particle.paint();\n      });\n      app.actors.forEach(function (actor) {\n        actor.paint();\n      });\n    }\n  }, {\n    key: \"focus\",\n    value: function focus() {\n      this.html.focus();\n    }\n  }, {\n    key: \"onKeyDown\",\n    value: function onKeyDown(e) {\n      if (!this.keysPressed[e.key]) this.keysPressed[e.key] = 1;\n    }\n  }, {\n    key: \"onKeyUp\",\n    value: function onKeyUp(e) {\n      this.keysPressed[e.key] = undefined;\n    }\n  }, {\n    key: \"processPlayerInput\",\n    value: function processPlayerInput() {\n      var app = this._app;\n      var playerActor = app.playerActor;\n\n      if (playerActor) {\n        playerActor.intent = undefined;\n        var moveX = 0;\n        var moveY = 0;\n        if (this.keysPressed['ArrowRight']) moveX++;\n        if (this.keysPressed['ArrowDown']) moveY++;\n        if (this.keysPressed['ArrowLeft']) moveX--;\n        if (this.keysPressed['ArrowUp']) moveY--;\n\n        if (this.keysPressed[' '] === _avo_misc_constants__WEBPACK_IMPORTED_MODULE_0__[\"SHORT_KEYPRESS_DURATION\"]) {\n          playerActor.intent = {\n            name: 'attack'\n          };\n        } else if (moveX || moveY) {\n          playerActor.intent = {\n            name: 'move',\n            args: {\n              x: moveX,\n              y: moveY\n            }\n          };\n        }\n      }\n    }\n  }, {\n    key: \"processPhysics\",\n    value: function processPhysics() {\n      var app = this._app; // Check Actor collisions\n\n      for (var a = 0; a < app.actors.length - 1; a++) {\n        var actorA = app.actors[a];\n\n        for (var b = a + 1; b < app.actors.length; b++) {\n          var actorB = app.actors[b];\n          var collisionCorrection = _avo_misc_physics__WEBPACK_IMPORTED_MODULE_1__[\"Physics\"].checkCollision(actorA, actorB);\n\n          if (collisionCorrection) {\n            // TODO: refine\n            // TODO: ignore if either are non-solid\n            actorA.x = collisionCorrection.ax;\n            actorA.y = collisionCorrection.ay;\n            actorB.x = collisionCorrection.bx;\n            actorB.y = collisionCorrection.by;\n          }\n        }\n      }\n    }\n  }]);\n\n  return ActionMode;\n}();\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (ActionMode);\n\n//# sourceURL=webpack:///./src/avo/action-mode/action-mode.js?");

/***/ }),

/***/ "./src/avo/action-mode/index.js":
/*!**************************************!*\
  !*** ./src/avo/action-mode/index.js ***!
  \**************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _action_mode__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./action-mode */ \"./src/avo/action-mode/action-mode.js\");\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (_action_mode__WEBPACK_IMPORTED_MODULE_0__[\"default\"]);\n\n//# sourceURL=webpack:///./src/avo/action-mode/index.js?");

/***/ }),

/***/ "./src/avo/avo-adventure.js":
/*!**********************************!*\
  !*** ./src/avo/avo-adventure.js ***!
  \**********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _avo_action_mode__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @avo/action-mode */ \"./src/avo/action-mode/index.js\");\n/* harmony import */ var _avo_story__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @avo/story */ \"./src/avo/story.js\");\n/* harmony import */ var _avo_misc_constants__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @avo/misc/constants */ \"./src/avo/misc/constants.js\");\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n\n\n\n\nvar AvoAdventure =\n/*#__PURE__*/\nfunction () {\n  function AvoAdventure(story) {\n    _classCallCheck(this, AvoAdventure);\n\n    this.mode = _avo_misc_constants__WEBPACK_IMPORTED_MODULE_2__[\"MODES\"].INITIALISING;\n    this.actors = [];\n    this.particles = [];\n    this.assets = {};\n    this.playerActor = null;\n    this.camera = {\n      x: 0,\n      y: 0\n    };\n    this.actionMode = new _avo_action_mode__WEBPACK_IMPORTED_MODULE_0__[\"default\"](this); // Initialise the story\n\n    this.story = story || new _avo_story__WEBPACK_IMPORTED_MODULE_1__[\"default\"](this);\n    this.nextFrame = null;\n    this.main();\n  }\n\n  _createClass(AvoAdventure, [{\n    key: \"changeMode\",\n    value: function changeMode(newMode) {\n      if (this.mode === _avo_misc_constants__WEBPACK_IMPORTED_MODULE_2__[\"MODES\"].ACTION) this.actionMode.unload(this);\n      if (newMode === _avo_misc_constants__WEBPACK_IMPORTED_MODULE_2__[\"MODES\"].ACTION) this.actionMode.load(this);\n      this.mode = newMode;\n    }\n    /*  Each main step is a 'frame' in the game\r\n     */\n\n  }, {\n    key: \"main\",\n    value: function main() {\n      if (this.mode === _avo_misc_constants__WEBPACK_IMPORTED_MODULE_2__[\"MODES\"].INITIALISING) this.startStoryIfReady(); // Run game logic and update game visuals\n      // Note: gameplay and visual frames are tied.\n\n      this.play();\n      this.paint();\n      this.cleanUp();\n      this.nextFrame = setTimeout(this.main.bind(this), 1000 / _avo_misc_constants__WEBPACK_IMPORTED_MODULE_2__[\"FRAMES_PER_SECOND\"]);\n    }\n    /*  Run game logic\r\n     */\n\n  }, {\n    key: \"play\",\n    value: function play() {\n      var story = this.story;\n\n      if (!story.skipPlay()) {\n        if (this.mode === _avo_misc_constants__WEBPACK_IMPORTED_MODULE_2__[\"MODES\"].ACTION) this.actionMode.play(this);\n      }\n\n      story.customPlay(this);\n    }\n    /*  Update game visuals\r\n     */\n\n  }, {\n    key: \"paint\",\n    value: function paint() {\n      var story = this.story;\n\n      if (!story.skipPaint()) {\n        if (this.mode === _avo_misc_constants__WEBPACK_IMPORTED_MODULE_2__[\"MODES\"].ACTION) this.actionMode.paint(this);\n      }\n\n      story.customPaint(this);\n    }\n    /*  Remove expired elements\r\n     */\n\n  }, {\n    key: \"cleanUp\",\n    value: function cleanUp() {\n      this.actors = this.actors.filter(function (actor) {\n        return !actor._expired;\n      });\n      this.particles = this.particles.filter(function (particle) {\n        return !particle._expired;\n      });\n    }\n    /*  Check if Story is ready to start\r\n     */\n\n  }, {\n    key: \"startStoryIfReady\",\n    value: function startStoryIfReady() {\n      var _this = this;\n\n      if (this.mode !== _avo_misc_constants__WEBPACK_IMPORTED_MODULE_2__[\"MODES\"].INITIALISING) return; // Assets Check\n\n      var allAssetsLoaded = true;\n      Object.keys(this.assets).forEach(function (id) {\n        var asset = _this.assets[id];\n        allAssetsLoaded = allAssetsLoaded && asset.loaded;\n      });\n\n      if (allAssetsLoaded) {\n        this.story.start(this);\n      }\n    }\n  }]);\n\n  return AvoAdventure;\n}();\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (AvoAdventure);\n\n//# sourceURL=webpack:///./src/avo/avo-adventure.js?");

/***/ }),

/***/ "./src/avo/index.js":
/*!**************************!*\
  !*** ./src/avo/index.js ***!
  \**************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _avo_adventure__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./avo-adventure */ \"./src/avo/avo-adventure.js\");\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (_avo_adventure__WEBPACK_IMPORTED_MODULE_0__[\"default\"]);\n\n//# sourceURL=webpack:///./src/avo/index.js?");

/***/ }),

/***/ "./src/avo/misc/constants.js":
/*!***********************************!*\
  !*** ./src/avo/misc/constants.js ***!
  \***********************************/
/*! exports provided: FRAMES_PER_SECOND, SHORT_KEYPRESS_DURATION, MODES, SHAPES, ROTATIONS, DIRECTIONS */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"FRAMES_PER_SECOND\", function() { return FRAMES_PER_SECOND; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"SHORT_KEYPRESS_DURATION\", function() { return SHORT_KEYPRESS_DURATION; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"MODES\", function() { return MODES; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"SHAPES\", function() { return SHAPES; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ROTATIONS\", function() { return ROTATIONS; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"DIRECTIONS\", function() { return DIRECTIONS; });\nvar FRAMES_PER_SECOND = 30;\nvar SHORT_KEYPRESS_DURATION = 1;\nvar MODES = {\n  INITIALISING: 'initialising',\n  ACTION: 'action',\n  CYOA: 'choose your own adventure' // TODO: change this to 'NOVEL'\n\n};\nvar SHAPES = {\n  NONE: 'none',\n  CIRCLE: 'circle',\n  SQUARE: 'square',\n  POLYGON: 'polygon'\n};\nvar ROTATIONS = {\n  EAST: 0,\n  SOUTHEAST: Math.PI * 0.25,\n  SOUTH: Math.PI * 0.5,\n  SOUTHWEST: Math.PI * 0.75,\n  WEST: Math.PI,\n  NORTHWEST: Math.PI * -0.75,\n  NORTH: Math.PI * -0.5,\n  NORTHEAST: Math.PI * -0.25\n};\nvar DIRECTIONS = {\n  EAST: 0,\n  SOUTH: 1,\n  WEST: 2,\n  NORTH: 3\n};\n\n//# sourceURL=webpack:///./src/avo/misc/constants.js?");

/***/ }),

/***/ "./src/avo/misc/image-asset.js":
/*!*************************************!*\
  !*** ./src/avo/misc/image-asset.js ***!
  \*************************************/
/*! exports provided: ImageAsset */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ImageAsset\", function() { return ImageAsset; });\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar ImageAsset = function ImageAsset(url) {\n  _classCallCheck(this, ImageAsset);\n\n  this.url = url;\n  this.img = null;\n  this.loaded = false;\n  this.img = new Image();\n\n  this.img.onload = function () {\n    this.loaded = true;\n  }.bind(this);\n\n  this.img.src = this.url;\n};\n\n//# sourceURL=webpack:///./src/avo/misc/image-asset.js?");

/***/ }),

/***/ "./src/avo/misc/physics.js":
/*!*********************************!*\
  !*** ./src/avo/misc/physics.js ***!
  \*********************************/
/*! exports provided: Physics */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Physics\", function() { return Physics; });\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./constants */ \"./src/avo/misc/constants.js\");\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance\"); }\n\nfunction _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n\nvar USE_CIRCLE_APPROXIMATION = false;\nvar Physics =\n/*#__PURE__*/\nfunction () {\n  function Physics() {\n    _classCallCheck(this, Physics);\n  }\n\n  _createClass(Physics, null, [{\n    key: \"checkCollision\",\n    //----------------------------------------------------------------\n\n    /*  Checks if objA is touching objB.\r\n        If true, returns the corrected coordinates for objA and objB, in form:\r\n          { ax, ay, bx, by }\r\n        If false, returns null.\r\n     */\n    value: function checkCollision(objA, objB) {\n      if (!objA || !objB || objA === objB) return null;\n\n      if (objA.shape === _constants__WEBPACK_IMPORTED_MODULE_0__[\"SHAPES\"].CIRCLE && objB.shape === _constants__WEBPACK_IMPORTED_MODULE_0__[\"SHAPES\"].CIRCLE) {\n        return Physics.checkCollision_circleCircle(objA, objB);\n      } else if ((objA.shape === _constants__WEBPACK_IMPORTED_MODULE_0__[\"SHAPES\"].SQUARE || objA.shape === _constants__WEBPACK_IMPORTED_MODULE_0__[\"SHAPES\"].POLYGON) && (objB.shape === _constants__WEBPACK_IMPORTED_MODULE_0__[\"SHAPES\"].SQUARE || objB.shape === _constants__WEBPACK_IMPORTED_MODULE_0__[\"SHAPES\"].POLYGON)) {\n        return Physics.checkCollision_polygonPolygon(objA, objB);\n      } else if (objA.shape === _constants__WEBPACK_IMPORTED_MODULE_0__[\"SHAPES\"].CIRCLE && (objB.shape === _constants__WEBPACK_IMPORTED_MODULE_0__[\"SHAPES\"].SQUARE || objB.shape === _constants__WEBPACK_IMPORTED_MODULE_0__[\"SHAPES\"].POLYGON)) {\n        if (USE_CIRCLE_APPROXIMATION) return Physics.checkCollision_polygonPolygon(objA, objB);\n        return Physics.checkCollision_circlePolygon(objA, objB);\n      } else if ((objA.shape === _constants__WEBPACK_IMPORTED_MODULE_0__[\"SHAPES\"].SQUARE || objA.shape === _constants__WEBPACK_IMPORTED_MODULE_0__[\"SHAPES\"].POLYGON) && objB.shape === _constants__WEBPACK_IMPORTED_MODULE_0__[\"SHAPES\"].CIRCLE) {\n        if (USE_CIRCLE_APPROXIMATION) return Physics.checkCollision_polygonPolygon(objA, objB);\n        var correction = Physics.checkCollision_circlePolygon(objB, objA);\n\n        if (correction) {\n          correction = {\n            ax: correction.bx,\n            ay: correction.by,\n            bx: correction.ax,\n            by: correction.ay\n          };\n        }\n\n        return correction;\n      }\n\n      return null;\n    } //----------------------------------------------------------------\n\n  }, {\n    key: \"checkCollision_circleCircle\",\n    value: function checkCollision_circleCircle(objA, objB) {\n      var fractionA = 0;\n      var fractionB = 0;\n\n      if (!objA.solid || !objB.solid) {//If either object isn't solid, there's no collision correction.\n      } else if (objA.movable && objB.movable) {\n        fractionA = 0.5;\n        fractionB = 0.5;\n      } else if (objA.movable) {\n        fractionA = 1;\n      } else if (objB.movable) {\n        fractionB = 1;\n      }\n\n      var distX = objB.x - objA.x;\n      var distY = objB.y - objA.y;\n      var dist = Math.sqrt(distX * distX + distY * distY);\n      var minimumDist = objA.radius + objB.radius;\n\n      if (dist < minimumDist) {\n        var angle = Math.atan2(distY, distX);\n        var correctDist = minimumDist;\n        var cosAngle = Math.cos(angle);\n        var sinAngle = Math.sin(angle);\n        return {\n          ax: objA.x - cosAngle * (correctDist - dist) * fractionA,\n          ay: objA.y - sinAngle * (correctDist - dist) * fractionA,\n          bx: objB.x + cosAngle * (correctDist - dist) * fractionB,\n          by: objB.y + sinAngle * (correctDist - dist) * fractionB\n        };\n      }\n\n      return null;\n    } //----------------------------------------------------------------\n\n  }, {\n    key: \"checkCollision_polygonPolygon\",\n    value: function checkCollision_polygonPolygon(objA, objB) {\n      var fractionA = 0;\n      var fractionB = 0;\n\n      if (!objA.solid || !objB.solid) {//If either object isn't solid, there's no collision correction.\n      } else if (objA.movable && objB.movable) {\n        fractionA = 0.5;\n        fractionB = 0.5;\n      } else if (objA.movable) {\n        fractionA = 1;\n      } else if (objB.movable) {\n        fractionB = 1;\n      }\n\n      var correction = null;\n      var verticesA = objA.vertices;\n      var verticesB = objB.vertices;\n      var projectionAxes = [].concat(_toConsumableArray(Physics.getShapeNormals(objA)), _toConsumableArray(Physics.getShapeNormals(objB)));\n\n      for (var i = 0; i < projectionAxes.length; i++) {\n        var axis = projectionAxes[i];\n        var projectionA = {\n          min: Infinity,\n          max: -Infinity\n        };\n        var projectionB = {\n          min: Infinity,\n          max: -Infinity\n        };\n\n        for (var j = 0; j < verticesA.length; j++) {\n          var val = Physics.dotProduct(axis, verticesA[j]);\n          projectionA.min = Math.min(projectionA.min, val);\n          projectionA.max = Math.max(projectionA.max, val);\n        }\n\n        for (var _j = 0; _j < verticesB.length; _j++) {\n          var _val = Physics.dotProduct(axis, verticesB[_j]);\n\n          projectionB.min = Math.min(projectionB.min, _val);\n          projectionB.max = Math.max(projectionB.max, _val);\n        }\n\n        var overlap = Math.max(0, Math.min(projectionA.max, projectionB.max) - Math.max(projectionA.min, projectionB.min));\n\n        if (!correction || overlap < correction.magnitude) {\n          var sign = Math.sign(projectionB.min + projectionB.max - (projectionA.min + projectionA.max));\n          correction = {\n            magnitude: overlap,\n            x: axis.x * overlap * sign,\n            y: axis.y * overlap * sign\n          };\n        }\n      }\n\n      if (correction && correction.magnitude > 0) {\n        return {\n          ax: objA.x - correction.x * fractionA,\n          ay: objA.y - correction.y * fractionA,\n          bx: objB.x + correction.x * fractionB,\n          by: objB.y + correction.y * fractionB\n        };\n      }\n\n      return null;\n    } //----------------------------------------------------------------\n\n  }, {\n    key: \"checkCollision_circlePolygon\",\n    value: function checkCollision_circlePolygon(objA, objB) {\n      var fractionA = 0;\n      var fractionB = 0;\n\n      if (!objA.solid || !objB.solid) {//If either object isn't solid, there's no collision correction.\n      } else if (objA.movable && objB.movable) {\n        fractionA = 0.5;\n        fractionB = 0.5;\n      } else if (objA.movable) {\n        fractionA = 1;\n      } else if (objB.movable) {\n        fractionB = 1;\n      }\n\n      var distX = objB.x - objA.x;\n      var distY = objB.y - objA.y;\n      var dist = Math.sqrt(distX * distX + distY * distY);\n      var angle = Math.atan2(distY, distX);\n      var centreToCentreAxis = dist !== 0 ? {\n        x: distX / dist,\n        y: distY / dist\n      } : {\n        x: 0,\n        y: 0\n      };\n      var correction = null;\n      var verticesB = objB.vertices;\n      var projectionAxes = [centreToCentreAxis].concat(_toConsumableArray(Physics.getShapeNormals(objB)));\n\n      for (var i = 0; i < projectionAxes.length; i++) {\n        var axis = projectionAxes[i];\n        var scalarA = Physics.dotProduct(axis, {\n          x: objA.x,\n          y: objA.y\n        });\n        var projectionA = {\n          min: scalarA - objA.radius,\n          max: scalarA + objA.radius\n        };\n        var projectionB = {\n          min: Infinity,\n          max: -Infinity\n        };\n\n        for (var j = 0; j < verticesB.length; j++) {\n          var val = Physics.dotProduct(axis, verticesB[j]);\n          projectionB.min = Math.min(projectionB.min, val);\n          projectionB.max = Math.max(projectionB.max, val);\n        }\n\n        var overlap = Math.max(0, Math.min(projectionA.max, projectionB.max) - Math.max(projectionA.min, projectionB.min));\n\n        if (!correction || overlap < correction.magnitude) {\n          var sign = Math.sign(projectionB.min + projectionB.max - (projectionA.min + projectionA.max));\n          correction = {\n            magnitude: overlap,\n            x: axis.x * overlap * sign,\n            y: axis.y * overlap * sign\n          };\n        }\n      }\n\n      if (correction && correction.magnitude > 0) {\n        return {\n          ax: objA.x - correction.x * fractionA,\n          ay: objA.y - correction.y * fractionA,\n          bx: objB.x + correction.x * fractionB,\n          by: objB.y + correction.y * fractionB\n        };\n      }\n    } //----------------------------------------------------------------\n\n    /*  Gets the NORMALISED normals for each edge of the object's shape. Assumes the object has the 'vertices' property.\r\n     */\n\n  }, {\n    key: \"getShapeNormals\",\n    value: function getShapeNormals(obj) {\n      var vertices = obj.vertices;\n      if (!vertices) return null;\n      if (vertices.length < 2) return []; //Look you need to have at least three vertices to be a shape.\n      //First, calculate the edges connecting each vertice.\n      //--------------------------------\n\n      var edges = [];\n\n      for (var i = 0; i < vertices.length; i++) {\n        var p1 = vertices[i];\n        var p2 = vertices[(i + 1) % vertices.length];\n        edges.push({\n          x: p2.x - p1.x,\n          y: p2.y - p1.y\n        });\n      } //--------------------------------\n      //Calculate the NORMALISED normals for each edge.\n      //--------------------------------\n\n\n      return edges.map(function (edge) {\n        var dist = Math.sqrt(edge.x * edge.x + edge.y * edge.y);\n        if (dist === 0) return {\n          x: 0,\n          y: 0\n        };\n        return {\n          x: -edge.y / dist,\n          y: edge.x / dist\n        };\n      }); //--------------------------------\n    } //----------------------------------------------------------------\n\n  }, {\n    key: \"dotProduct\",\n    value: function dotProduct(vectorA, vectorB) {\n      if (!vectorA || !vectorB) return null;\n      return vectorA.x * vectorB.x + vectorA.y * vectorB.y;\n    } //----------------------------------------------------------------\n\n  }]);\n\n  return Physics;\n}();\n\n//# sourceURL=webpack:///./src/avo/misc/physics.js?");

/***/ }),

/***/ "./src/avo/story-elements/actor.js":
/*!*****************************************!*\
  !*** ./src/avo/story-elements/actor.js ***!
  \*****************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _avo_misc_constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @avo/misc/constants */ \"./src/avo/misc/constants.js\");\n/* harmony import */ var _story_element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./story-element */ \"./src/avo/story-elements/story-element.js\");\n/* harmony import */ var _particle__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./particle */ \"./src/avo/story-elements/particle.js\");\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\n\n\n\nvar ACTION_TYPES = {\n  IDLE: 'idle',\n  // Default. Loops.\n  CONTINUOUS: 'continuous',\n  // Requires continuous input (e.g. moving). Loops until cancelled (e.g. user stops pressing arrow keys) or interrupted (e.g. by taking damage and going into the knockback state).\n  STANDARD: 'standard',\n  // Actions that play out all their steps. Cannot be cancelled by new user input. Can be interrupted.\n  SPECIAL_ONCE: 'special once',\n  // Actions that play out all their steps. Cannot be cancelled nor interrupted, except by story scripts.\n  SPECIAL_FOREVER: 'special forever' // Actions that play in a loop. Cannot be cancelled nor interrupted, except by story scripts.\n\n};\n\nvar Actor =\n/*#__PURE__*/\nfunction (_StoryElement) {\n  _inherits(Actor, _StoryElement);\n\n  function Actor(app) {\n    var _this;\n\n    var initialValues = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, Actor);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Actor).call(this, app));\n    _this.shape = _avo_misc_constants__WEBPACK_IMPORTED_MODULE_0__[\"SHAPES\"].CIRCLE;\n    _this.solid = true;\n    _this.movable = true;\n    _this.intent = undefined;\n    _this.actionName = 'idle';\n    _this.actionArgs = {};\n    _this.actionStep = 0;\n    _this.actions = {\n      'idle': {\n        type: ACTION_TYPES.IDLE,\n        continuous: true,\n        steps: 1,\n        script: function script(app, actor, action, actionArgs, step) {// TODO: playFrame: idle\n        }\n      },\n      'move': {\n        type: ACTION_TYPES.CONTINUOUS,\n        continuous: true,\n        steps: 6,\n        script: function script(app, actor, action, actionArgs, step) {\n          var speed = 4; // TODO\n\n          var rotation = Math.atan2(actionArgs.y, actionArgs.x); // TODO\n\n          actor.x += Math.cos(rotation) * speed;\n          actor.y += Math.sin(rotation) * speed;\n          actor.rotation = rotation; // TODO: playFrame: move-1, move-2, move-1, move-3\n        }\n      },\n      'attack': {\n        //\n        type: ACTION_TYPES.STANDARD,\n        continuous: false,\n        steps: 30,\n        script: function script(app, actor, action, actionArgs, step) {\n          if (step < 20) {// TODO: playFrame: attack-windup\n          } else if (step === 20) {\n            var particle = new _particle__WEBPACK_IMPORTED_MODULE_2__[\"default\"](app, {\n              x: actor.x + Math.cos(actor.rotation) * actor.size * 0.8,\n              y: actor.y + Math.sin(actor.rotation) * actor.size * 0.8,\n              size: actor.size * 1,\n              duration: 5 * 30 // TODO: onCollision logic\n\n            });\n            app.particles.push(particle); // TODO: playFrame: attack-active\n          } else {// TODO: playFrame: attack-winddown\n            }\n        }\n      }\n    }; // Set initial values\n\n    Object.assign(_assertThisInitialized(_this), initialValues);\n    return _this;\n  }\n\n  _createClass(Actor, [{\n    key: \"play\",\n    value: function play() {\n      var app = this._app;\n      this.processUpkeep();\n      this.processIntent();\n      this.processActions();\n    }\n  }, {\n    key: \"paint\",\n    value: function paint() {\n      // TODO: this should just move the animation frame one step. Add getSprite() for sprite logic, which will be called in ActionMode.\n      var app = this._app;\n      var camera = app.camera;\n      var canvas2d = app.actionMode && app.actionMode.canvas2d;\n      if (app.mode !== _avo_misc_constants__WEBPACK_IMPORTED_MODULE_0__[\"MODES\"].ACTION) return;\n      if (!canvas2d) return; // Simple shadow\n\n      canvas2d.fillStyle = 'rgba(0, 0, 0, 0.5)';\n      canvas2d.beginPath();\n      canvas2d.arc(this.x + camera.x, this.y + camera.y, this.size / 2, 0, 2 * Math.PI);\n      canvas2d.fill(); // Simple direction\n\n      canvas2d.strokeStyle = 'rgba(0, 0, 0, 0.5)';\n      canvas2d.lineWidth = 2;\n      canvas2d.beginPath();\n      canvas2d.moveTo(this.x, this.y);\n      canvas2d.lineTo(this.x + Math.cos(this.rotation) * this.size * 0.6, this.y + Math.sin(this.rotation) * this.size * 0.6);\n      canvas2d.stroke(); // Paint basic actor\n\n      var assets = app.assets;\n      var srcX = 0,\n          srcY = 0;\n      var srcSizeX = this.size,\n          srcSizeY = this.size;\n      var tgtX = Math.floor(this.x - srcSizeX / 2),\n          tgtY = Math.floor(this.y - srcSizeY / 2);\n      var tgtSizeX = Math.floor(this.size),\n          tgtSizeY = Math.floor(this.size);\n      canvas2d.drawImage(assets.basicActor.img, srcX, srcY, srcSizeX, srcSizeY, tgtX, tgtY, tgtSizeX, tgtSizeY);\n    }\n  }, {\n    key: \"processUpkeep\",\n    value: function processUpkeep() {// TODO\n    }\n  }, {\n    key: \"processIntent\",\n    value: function processIntent() {\n      // Translate intent into action.\n\n      /*\r\n      if (this.intent && this.intent.name === 'move' && this.checkStatus('can move')) {\r\n        this.action = Object.assign({}, this.intent);\r\n      } else if (this.checkStatus('can act')) {\r\n        this.action = Object.assign({}, this.intent);\r\n      } else {\r\n        this.action = undefined;\r\n      }*/\n      var action = this.actions[this.actionName];\n\n      if (!action) {\n        // Sanity check: if the Actor isn't doing anything, go idle.\n        this.goIdle(); // This is just a failsafe - the actor should ALWAYS have an action, even if it's the IDLE action.\n      } else if (!this.intent) {\n        // If the Actor has no intent (e.g. player has no key input)...\n        // ...cancel any currently cancellable actions.\n        // (Obviously, ignore this if the \n        if (action.type === ACTION_TYPES.CONTINUOUS) this.goIdle();\n      } else {\n        // Actor intends to perform a new action.\n        // First, can the current action be overwritten by a new action?\n        if (action.type === ACTION_TYPES.IDLE || action.type === ACTION_TYPES.CONTINUOUS) {\n          // Second, check if the new action is different from the old one. \n          // Reset the actionStep counter if that's the case.\n          if (this.actionName !== this.intent.name) {\n            this.actionStep = 0;\n          } // Finally, convert the intent into the new action.\n\n\n          this.actionName = this.intent.name;\n          this.actionArgs = this.intent.args ? _objectSpread({}, this.intent.args) : {};\n        }\n      }\n    }\n  }, {\n    key: \"goIdle\",\n    value: function goIdle() {\n      this.actionName = 'idle';\n      this.actionStep = 0;\n      this.actionArgs = {};\n    }\n  }, {\n    key: \"processActions\",\n    value: function processActions() {\n      var app = this._app;\n      var action = this.actions[this.actionName];\n      if (!action) return;\n      action.script(app, this, action, this.actionArgs, this.actionStep);\n      this.actionStep += 1;\n\n      if (this.actionStep >= action.steps) {\n        // Is the action over?\n        this.actionStep = 0; // If it's over (and doesn't loop), revert to default.\n\n        if (action.type === ACTION_TYPES.STANDARD || action.type === ACTION_TYPES.SPECIAL_ONCE) {\n          this.goIdle();\n        }\n      } // TODO: move all these to a library\n\n      /*\r\n      if (this.action.name === 'move'\r\n          && !(this.action.x === 0 && this.action.y === 0)\r\n          && this.checkStatus('can move')) {\r\n        const speed = 4; // TODO\r\n        const rotation = Math.atan2(this.action.y, this.action.x);  // TODO\r\n        this.x += Math.cos(rotation) * speed;\r\n        this.y += Math.sin(rotation) * speed;\r\n        this.rotation = rotation;\r\n      }\r\n      \r\n      if (this.action.name === 'primary') {\r\n        console.log('PEW PEW');\r\n        const particle = new Particle(app, {\r\n          x: this.x + Math.cos(this.rotation) * this.size * 0.8,\r\n          y: this.y + Math.sin(this.rotation) * this.size * 0.8,\r\n          size: this.size * 1,\r\n          duration: 5 * 30\r\n        });  // TODO\r\n        app.particles.push(particle);\r\n      }*/\n\n    }\n  }]);\n\n  return Actor;\n}(_story_element__WEBPACK_IMPORTED_MODULE_1__[\"default\"]);\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Actor);\n\n//# sourceURL=webpack:///./src/avo/story-elements/actor.js?");

/***/ }),

/***/ "./src/avo/story-elements/particle.js":
/*!********************************************!*\
  !*** ./src/avo/story-elements/particle.js ***!
  \********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _avo_misc_constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @avo/misc/constants */ \"./src/avo/misc/constants.js\");\n/* harmony import */ var _story_element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./story-element */ \"./src/avo/story-elements/story-element.js\");\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\n\n\n\nvar Particle =\n/*#__PURE__*/\nfunction (_StoryElement) {\n  _inherits(Particle, _StoryElement);\n\n  function Particle(app, initialValues) {\n    var _this;\n\n    _classCallCheck(this, Particle);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Particle).call(this, app));\n    _this.shape = _avo_misc_constants__WEBPACK_IMPORTED_MODULE_0__[\"SHAPES\"].CIRCLE;\n    _this.duration = Infinity; // Set initial values\n\n    Object.assign(_assertThisInitialized(_this), initialValues);\n    return _this;\n  }\n\n  _createClass(Particle, [{\n    key: \"play\",\n    value: function play() {\n      this.duration--;\n      if (this.duration < 0) this._expired = true;\n    }\n  }, {\n    key: \"paint\",\n    value: function paint() {\n      var app = this._app;\n      var camera = app.camera;\n      var canvas2d = app.actionMode && app.actionMode.canvas2d;\n      if (app.mode !== _avo_misc_constants__WEBPACK_IMPORTED_MODULE_0__[\"MODES\"].ACTION) return;\n      if (!canvas2d) return; // Simple shadow\n\n      canvas2d.fillStyle = 'rgba(238, 238, 204, 0.5)';\n      canvas2d.beginPath();\n      canvas2d.arc(this.x + camera.x, this.y + camera.y, this.size / 2, 0, 2 * Math.PI);\n      canvas2d.fill();\n    }\n  }]);\n\n  return Particle;\n}(_story_element__WEBPACK_IMPORTED_MODULE_1__[\"default\"]);\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Particle);\n\n//# sourceURL=webpack:///./src/avo/story-elements/particle.js?");

/***/ }),

/***/ "./src/avo/story-elements/story-element.js":
/*!*************************************************!*\
  !*** ./src/avo/story-elements/story-element.js ***!
  \*************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _avo_misc_constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @avo/misc/constants */ \"./src/avo/misc/constants.js\");\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n\n\nvar StoryElement =\n/*#__PURE__*/\nfunction () {\n  // TODO: rename to just 'Element' or 'Entity'?\n  function StoryElement(app) {\n    _classCallCheck(this, StoryElement);\n\n    this._app = app; // Expired elements are removed at the end of the cycle.\n\n    this._expired = false;\n    this.x = 0;\n    this.y = 0;\n    this.size = 48; // TODO: this.z = 1;\n\n    this._rotation = _avo_misc_constants__WEBPACK_IMPORTED_MODULE_0__[\"ROTATIONS\"].SOUTH; // Rotation in radians\n\n    this.shape = _avo_misc_constants__WEBPACK_IMPORTED_MODULE_0__[\"SHAPES\"].NONE;\n    this.shapePolygonPath = null; // Only applicable if shape === SHAPES.POLYGON\n\n    this.solid = false;\n    this.movable = false;\n  }\n\n  _createClass(StoryElement, [{\n    key: \"play\",\n    value: function play() {}\n  }, {\n    key: \"paint\",\n    value: function paint() {} // TODO: this should just move the animation frame one step. Add getSprite() for sprite logic, which will be called in ActionMode.\n\n  }, {\n    key: \"left\",\n    get: function get() {\n      return this.x - this.size / 2;\n    },\n    set: function set(val) {\n      this.x = val + this.size / 2;\n    }\n  }, {\n    key: \"right\",\n    get: function get() {\n      return this.x + this.size / 2;\n    },\n    set: function set(val) {\n      this.x = val - this.size / 2;\n    }\n  }, {\n    key: \"top\",\n    get: function get() {\n      return this.y - this.size / 2;\n    },\n    set: function set(val) {\n      this.y = val + this.size / 2;\n    }\n  }, {\n    key: \"bottom\",\n    get: function get() {\n      return this.y + this.size / 2;\n    },\n    set: function set(val) {\n      this.y = val - this.size / 2;\n    }\n  }, {\n    key: \"radius\",\n    get: function get() {\n      return this.size / 2;\n    },\n    set: function set(val) {\n      this.size = val * 2;\n    }\n  }, {\n    key: \"rotation\",\n    get: function get() {\n      return this._rotation;\n    },\n    set: function set(val) {\n      this._rotation = val;\n\n      while (this._rotation > Math.PI) {\n        this._rotation -= Math.PI * 2;\n      }\n\n      while (this._rotation <= -Math.PI) {\n        this._rotation += Math.PI * 2;\n      }\n    }\n  }, {\n    key: \"direction\",\n    get: function get() {\n      //Get cardinal direction\n      //Favour East and West when rotation is exactly SW, NW, SE or NE.\n      if (this._rotation <= Math.PI * 0.25 && this._rotation >= Math.PI * -0.25) {\n        return _avo_misc_constants__WEBPACK_IMPORTED_MODULE_0__[\"DIRECTIONS\"].EAST;\n      } else if (this._rotation > Math.PI * 0.25 && this._rotation < Math.PI * 0.75) {\n        return _avo_misc_constants__WEBPACK_IMPORTED_MODULE_0__[\"DIRECTIONS\"].SOUTH;\n      } else if (this._rotation < Math.PI * -0.25 && this._rotation > Math.PI * -0.75) {\n        return _avo_misc_constants__WEBPACK_IMPORTED_MODULE_0__[\"DIRECTIONS\"].NORTH;\n      } else {\n        return _avo_misc_constants__WEBPACK_IMPORTED_MODULE_0__[\"DIRECTIONS\"].WEST;\n      }\n    },\n    set: function set(val) {\n      switch (val) {\n        case _avo_misc_constants__WEBPACK_IMPORTED_MODULE_0__[\"DIRECTIONS\"].EAST:\n          this._rotation = _avo_misc_constants__WEBPACK_IMPORTED_MODULE_0__[\"ROTATIONS\"].EAST;\n          break;\n\n        case _avo_misc_constants__WEBPACK_IMPORTED_MODULE_0__[\"DIRECTIONS\"].SOUTH:\n          this._rotation = _avo_misc_constants__WEBPACK_IMPORTED_MODULE_0__[\"ROTATIONS\"].SOUTH;\n          break;\n\n        case _avo_misc_constants__WEBPACK_IMPORTED_MODULE_0__[\"DIRECTIONS\"].WEST:\n          this._rotation = _avo_misc_constants__WEBPACK_IMPORTED_MODULE_0__[\"ROTATIONS\"].WEST;\n          break;\n\n        case _avo_misc_constants__WEBPACK_IMPORTED_MODULE_0__[\"DIRECTIONS\"].NORTH:\n          this._rotation = _avo_misc_constants__WEBPACK_IMPORTED_MODULE_0__[\"ROTATIONS\"].NORTH;\n          break;\n      }\n    }\n  }, {\n    key: \"vertices\",\n    get: function get() {\n      var _this = this;\n\n      var v = [];\n\n      if (this.shape === _avo_misc_constants__WEBPACK_IMPORTED_MODULE_0__[\"SHAPES\"].SQUARE) {\n        v.push({\n          x: this.left,\n          y: this.top\n        });\n        v.push({\n          x: this.right,\n          y: this.top\n        });\n        v.push({\n          x: this.right,\n          y: this.bottom\n        });\n        v.push({\n          x: this.left,\n          y: this.bottom\n        });\n      } else if (this.shape === _avo_misc_constants__WEBPACK_IMPORTED_MODULE_0__[\"SHAPES\"].CIRCLE) {\n        //Approximation\n        CIRCLE_TO_POLYGON_APPROXIMATOR.map(function (approximator) {\n          v.push({\n            x: _this.x + _this.radius * approximator.cosAngle,\n            y: _this.y + _this.radius * approximator.sinAngle\n          });\n        });\n      } else if (this.shape === _avo_misc_constants__WEBPACK_IMPORTED_MODULE_0__[\"SHAPES\"].POLYGON) {\n        if (!this.shapePolygonPath) return [];\n\n        for (var i = 0; i < this.shapePolygonPath.length; i += 2) {\n          v.push({\n            x: this.x + this.shapePolygonPath[i],\n            y: this.y + this.shapePolygonPath[i + 1]\n          });\n        }\n      }\n\n      return v;\n    }\n  }]);\n\n  return StoryElement;\n}();\n\nvar CIRCLE_TO_POLYGON_APPROXIMATOR = [_avo_misc_constants__WEBPACK_IMPORTED_MODULE_0__[\"ROTATIONS\"].EAST, _avo_misc_constants__WEBPACK_IMPORTED_MODULE_0__[\"ROTATIONS\"].SOUTHEAST, _avo_misc_constants__WEBPACK_IMPORTED_MODULE_0__[\"ROTATIONS\"].SOUTH, _avo_misc_constants__WEBPACK_IMPORTED_MODULE_0__[\"ROTATIONS\"].SOUTHWEST, _avo_misc_constants__WEBPACK_IMPORTED_MODULE_0__[\"ROTATIONS\"].WEST, _avo_misc_constants__WEBPACK_IMPORTED_MODULE_0__[\"ROTATIONS\"].NORTHWEST, _avo_misc_constants__WEBPACK_IMPORTED_MODULE_0__[\"ROTATIONS\"].NORTH, _avo_misc_constants__WEBPACK_IMPORTED_MODULE_0__[\"ROTATIONS\"].NORTHEAST].map(function (angle) {\n  return {\n    cosAngle: Math.cos(angle),\n    sinAngle: Math.sin(angle)\n  };\n});\n/* harmony default export */ __webpack_exports__[\"default\"] = (StoryElement);\n\n//# sourceURL=webpack:///./src/avo/story-elements/story-element.js?");

/***/ }),

/***/ "./src/avo/story.js":
/*!**************************!*\
  !*** ./src/avo/story.js ***!
  \**************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _avo_misc_constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @avo/misc/constants */ \"./src/avo/misc/constants.js\");\n/* harmony import */ var _avo_misc_image_asset__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @avo/misc/image-asset */ \"./src/avo/misc/image-asset.js\");\n/* harmony import */ var _avo_story_elements_actor__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @avo/story-elements/actor */ \"./src/avo/story-elements/actor.js\");\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n\n\n\n\nvar Story =\n/*#__PURE__*/\nfunction () {\n  function Story(app) {\n    _classCallCheck(this, Story);\n\n    this._app = app; // Assets\n\n    app.assets.basicActor = new _avo_misc_image_asset__WEBPACK_IMPORTED_MODULE_1__[\"ImageAsset\"]('assets/actor-v1.png');\n    app.playerActor = new _avo_story_elements_actor__WEBPACK_IMPORTED_MODULE_2__[\"default\"](app, {\n      x: 160,\n      y: 120\n    });\n    app.actors.push(app.playerActor);\n    var testActorA = new _avo_story_elements_actor__WEBPACK_IMPORTED_MODULE_2__[\"default\"](app, {\n      x: 80,\n      y: 120\n    });\n    app.actors.push(testActorA); // TODO:\n    // app.addActor();\n    // app.addAsset();\n  }\n\n  _createClass(Story, [{\n    key: \"start\",\n    value: function start() {\n      var app = this._app;\n      console.info('STORY IS READY TO START!');\n      app.changeMode(_avo_misc_constants__WEBPACK_IMPORTED_MODULE_0__[\"MODES\"].ACTION);\n    }\n  }, {\n    key: \"skipPlay\",\n    value: function skipPlay() {\n      return false;\n    }\n  }, {\n    key: \"customPlay\",\n    value: function customPlay() {}\n  }, {\n    key: \"skipPaint\",\n    value: function skipPaint() {\n      return false;\n    }\n  }, {\n    key: \"customPaint\",\n    value: function customPaint() {}\n  }]);\n\n  return Story;\n}();\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Story);\n\n//# sourceURL=webpack:///./src/avo/story.js?");

/***/ }),

/***/ "./src/main.js":
/*!*********************!*\
  !*** ./src/main.js ***!
  \*********************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _avo__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./avo */ \"./src/avo/index.js\");\n\n\nwindow.onload = function () {\n  window.app = new _avo__WEBPACK_IMPORTED_MODULE_0__[\"default\"]();\n};\n\n//# sourceURL=webpack:///./src/main.js?");

/***/ })

/******/ });